<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Termin Script Hub</title>
  <style>
    /* [Styles unchanged, truncated for brevity] */

    .generated-key {
      margin-top: 1rem;
      background: #e0ffe0;
      border: 1px solid #6c63ff;
      border-radius: 6px;
      padding: 1rem;
      color: #333;
      font-weight: bold;
      display: none;
    }

    .notice-box {
      margin-top: 1rem;
      padding: 1rem;
      background: rgba(255, 223, 0, 0.5);
      border-radius: 8px;
      text-align: center;
      font-weight: bold;
      display: none;
      animation: slideIn 0.3s ease-in-out forwards;
    }

    select#payment-select {
      padding: 0.6rem;
      font-size: 1rem;
      border-radius: 8px;
      border: 1px solid #aaa;
      background: #f8f8f8;
      width: 100%;
      max-width: 300px;
      font-weight: bold;
    }

    select#payment-select:focus {
      border-color: #6c63ff;
      outline: none;
      background: #fff;
    }
  </style>
</head>
<body>
  <!-- [Nav and other tabs unchanged] -->

  <div id="keys" class="tab-content">
    <h2>Buy a Key</h2>
    <div class="keys-boxes">
      <div class="key-box">
        <h3>7 Days Key</h3>
        <p>$3</p>
        <button onclick="purchaseKey('7 Days')">Buy Now</button>
      </div>
      <div class="key-box">
        <h3>30 Days Key</h3>
        <p>$10</p>
        <button onclick="purchaseKey('30 Days')">Buy Now</button>
      </div>
      <div class="key-box">
        <h3>Lifetime Key</h3>
        <p>$30</p>
        <button onclick="purchaseKey('Lifetime')">Buy Now</button>
      </div>
    </div>

    <h3 style="margin-top:2rem;">Accepted Payment Methods</h3>
    <div class="payment-methods">
      <label for="payment-select">Select Payment:</label>
      <select id="payment-select" onchange="showNotice()">
        <option value="paypal">PayPal</option>
        <option value="fib">FIB</option>
        <option value="robux">Robux</option>
        <option value="mm2">MM2</option>
        <option value="adopt">Adopt Me</option>
      </select>
    </div>

    <div id="notice" class="notice-box">
      If you click Buy Key, you will be redirected to our Discord server to complete the transaction.
    </div>

    <div id="generated-key" class="generated-key"></div>
  </div>

  <!-- [About and other sections] -->

  <script>
    function showTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
    }

    function copyText(button) {
      const textarea = button.previousElementSibling;
      navigator.clipboard.writeText(textarea.value).then(() => {
        button.innerText = 'Copied!';
        setTimeout(() => button.innerText = 'Copy', 2000);
      });
    }

    function showNotice() {
      const payment = document.getElementById('payment-select').value;
      const notice = document.getElementById('notice');
      if (["robux", "adopt", "mm2"].includes(payment)) {
        notice.style.display = 'block';
      } else {
        notice.style.display = 'none';
      }
    }

    function purchaseKey(type) {
      const payment = document.getElementById('payment-select').value;
      const deviceInfo = navigator.userAgent;
      const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
      let key = "TerminKey_";
      const length = Math.floor(Math.random() * 6) + 40;
      for (let i = 0; i < length; i++) {
        key += chars.charAt(Math.floor(Math.random() * chars.length));
      }

      if (["robux", "adopt", "mm2"].includes(payment)) {
        window.open("https://discord.gg/KkzMrTzSF4", "_blank");
      } else {
        const keyBox = document.getElementById('generated-key');
        keyBox.style.display = 'block';
        keyBox.innerText = `Key for ${type}:\n${key}\n\nDevice Info: ${deviceInfo}`;

        // Send to backend for Discord DM (API should be hosted on your server)
        fetch('/api/send-dm', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            key: key,
            device: deviceInfo,
            type: type
          })
        }).then(res => res.json())
        .then(data => {
          console.log("DM sent:", data);
        }).catch(err => {
          console.error("Failed to send DM:", err);
        });
      }
    }
  </script>
</body>
</html>
